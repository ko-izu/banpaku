<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8" name ="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>banpaku</title>
　<link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />

  <style>
    #map { height: 100vh; }
  </style>
  <style>
.my-label {
  background: transparent !important;  /* 背景を透明に */
  border: none !important;              /* 枠線をなくす */
  box-shadow: none !important;          /* 影も消す */
  color: black;                         /* 文字色は任意 */
  font-weight: bold;
  font-size: 13px;
  padding: 0;
}
</style>
</head>
<body>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script src="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.js"></script>
<script>
  var map = L.map('map',{maxBounds: 
  [
  [34.642, 135.37],
  [34.661, 135.396]
  ],
   maxZoom: 20,
   minZoom: 15}).setView([34.64891, 135.38345], 16); 
  


  // Locateボタンを追加
  L.control.locate({
    position: 'topleft',  // ボタンの位置を指定 (左上)
    strings: {
      title: "現在地を表示"  // ボタンのツールチップ
    },
    flyTo: true, // 現在地に自動で移動する
    keepCurrentZoomLevel: true  // 現在のズームレベルを維持
  }).addTo(map);


  var imageUrl = 'img.jpg';
  var imageBounds = [[34.645074,135.372921],[34.657974,135.394968]];


  L.imageOverlay(imageUrl, imageBounds).addTo(map);
  

  

  var geojsonData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"住友"},"geometry":{"type":"Polygon","coordinates":[[[135.3877,34.649573],[135.388231,34.649641],[135.388367,34.64905],[135.388306,34.649028],[135.387798,34.649043],[135.3877,34.649573]]]}},{"type":"Feature","properties":{"name":"電力"},"geometry":{"type":"Polygon","coordinates":[[[135.387798,34.649043],[135.387265,34.649059],[135.387214,34.649377],[135.387407,34.649551],[135.3877,34.649573],[135.387798,34.649043]]]}},{"type":"Feature","properties":{"name":"ウーマン"},"geometry":{"type":"Polygon","coordinates":[[[135.387254,34.648719],[135.387265,34.649059],[135.388306,34.649028],[135.388349,34.648737],[135.387254,34.648719]]]}},{"type":"Feature","properties":{"name":"日本"},"geometry":{"type":"Polygon","coordinates":[[[135.388349,34.648737],[135.387254,34.648719],[135.38712,34.648004],[135.388595,34.647757],[135.388349,34.648737]]]}},{"type":"Feature","properties":{"name":"NTT"},"geometry":{"type":"Polygon","coordinates":[[[135.388346,34.650824],[135.388183,34.650299],[135.387579,34.650367],[135.387794,34.650963],[135.388346,34.650824]]]}},{"type":"Feature","properties":{"name":"ヘルスケア"},"geometry":{"type":"Polygon","coordinates":[[[135.387579,34.650367],[135.386842,34.650407],[135.386893,34.650886],[135.387322,34.651479],[135.387853,34.651369],[135.387794,34.650963],[135.387579,34.650367]]]}},{"type":"Feature","properties":{"name":"関西"},"geometry":{"type":"Polygon","coordinates":[[[135.386842,34.650407],[135.386461,34.650921],[135.386643,34.651301],[135.387097,34.651169],[135.386893,34.650886],[135.386842,34.650407]]]}},{"type":"Feature","properties":{"name":"マレーシア"},"geometry":{"type":"Polygon","coordinates":[[[135.386168,34.650358],[135.386173,34.650301],[135.386139,34.649986],[135.385605,34.650025],[135.385629,34.650396],[135.386168,34.650358]]]}},{"type":"Feature","properties":{"name":"ネパール"},"geometry":{"type":"Polygon","coordinates":[[[135.385983,34.650793],[135.385712,34.650464],[135.386318,34.650425],[135.385983,34.650793]]]}},{"type":"Feature","properties":{"name":"ルクセンブルク"},"geometry":{"type":"Polygon","coordinates":[[[135.385924,34.650859],[135.385634,34.650467],[135.385318,34.650497],[135.385704,34.651056],[135.385924,34.650859]]]}},{"type":"Feature","properties":{"name":"ドイツ"},"geometry":{"type":"Polygon","coordinates":[[[135.385318,34.650497],[135.3848,34.650528],[135.385326,34.651292],[135.385704,34.651056],[135.385318,34.650497]]]}},{"type":"Feature","properties":{"name":"韓国"},"geometry":{"type":"Polygon","coordinates":[[[135.385326,34.651292],[135.3848,34.650528],[135.384473,34.650555],[135.384988,34.651453],[135.385326,34.651292]]]}},{"type":"Feature","properties":{"name":"コモンズF"},"geometry":{"type":"Polygon","coordinates":[[[135.384988,34.651453],[135.384788,34.651104],[135.384586,34.651118],[135.384779,34.651519],[135.384988,34.651453]]]}},{"type":"Feature","properties":{"name":"アゼルバイジャン"},"geometry":{"type":"Polygon","coordinates":[[[135.384199,34.651175],[135.384151,34.650771],[135.384393,34.650742],[135.384425,34.651153],[135.384199,34.651175]]]}},{"type":"Feature","properties":{"name":"夜の地球"},"geometry":{"type":"Polygon","coordinates":[[[135.383846,34.65118],[135.38381,34.651051],[135.383728,34.650798],[135.383926,34.65076],[135.384046,34.651148],[135.383846,34.65118]]]}},{"type":"Feature","properties":{"name":"モナコ"},"geometry":{"type":"Polygon","coordinates":[[[135.383727,34.651554],[135.383674,34.651076],[135.38381,34.651051],[135.383939,34.651512],[135.383727,34.651554]]]}},{"type":"Feature","properties":{"name":"タイ"},"geometry":{"type":"Polygon","coordinates":[[[135.383279,34.650903],[135.383454,34.650915],[135.383526,34.651329],[135.383537,34.651724],[135.383191,34.651702],[135.383279,34.650903]]]}},{"type":"Feature","properties":{"name":"スペイン"},"geometry":{"type":"Polygon","coordinates":[[[135.383191,34.651702],[135.382837,34.651647],[135.382856,34.651259],[135.383011,34.650689],[135.383277,34.650678],[135.383279,34.650903],[135.383191,34.651702]]]}},{"type":"Feature","properties":{"name":"サウジアラビア"},"geometry":{"type":"Polygon","coordinates":[[[135.383011,34.650689],[135.382856,34.651259],[135.382837,34.651647],[135.382373,34.651532],[135.382729,34.650685],[135.383011,34.650689]]]}},{"type":"Feature","properties":{"name":"オーストラリア"},"geometry":{"type":"Polygon","coordinates":[[[135.382729,34.650685],[135.382332,34.650705],[135.381992,34.651422],[135.382373,34.651532],[135.382729,34.650685]]]}},{"type":"Feature","properties":{"name":"インドネシア"},"geometry":{"type":"Polygon","coordinates":[[[135.382332,34.650705],[135.382029,34.650723],[135.381716,34.651301],[135.381992,34.651422],[135.382332,34.650705]]]}},{"type":"Feature","properties":{"name":"インド"},"geometry":{"type":"Polygon","coordinates":[[[135.382029,34.650723],[135.381681,34.650742],[135.381426,34.651144],[135.381716,34.651301],[135.382029,34.650723]]]}},{"type":"Feature","properties":{"name":"ウズベキスタン"},"geometry":{"type":"Polygon","coordinates":[[[135.381353,34.651098],[135.380978,34.650795],[135.381568,34.650751],[135.381353,34.651098]]]}},{"type":"Feature","properties":{"name":"セルビア"},"geometry":{"type":"Polygon","coordinates":[[[135.381249,34.650636],[135.380863,34.650663],[135.380925,34.650486],[135.381067,34.650367],[135.381222,34.650308],[135.381249,34.650636]]]}},{"type":"Feature","properties":{"name":"バングラデシュ"},"geometry":{"type":"Polygon","coordinates":[[[135.381222,34.650308],[135.381383,34.650299],[135.381415,34.650625],[135.381249,34.650636],[135.381222,34.650308]]]}},{"type":"Feature","properties":{"name":"セネガル"},"geometry":{"type":"Polygon","coordinates":[[[135.381383,34.650299],[135.381534,34.650292],[135.381558,34.650619],[135.381415,34.650625],[135.381383,34.650299]]]}},{"type":"Feature","properties":{"name":"エジプト"},"geometry":{"type":"Polygon","coordinates":[[[135.381534,34.650292],[135.381673,34.650281],[135.381706,34.650608],[135.381558,34.650619],[135.381534,34.650292]]]}},{"type":"Feature","properties":{"name":"コモンズB"},"geometry":{"type":"Polygon","coordinates":[[[135.382502,34.650601],[135.381711,34.650656],[135.381665,34.650204],[135.382451,34.650153],[135.382502,34.650601]]]}},{"type":"Feature","properties":{"name":"コモンズA"},"geometry":{"type":"Polygon","coordinates":[[[135.385605,34.650025],[135.385522,34.650032],[135.385511,34.649882],[135.384575,34.649948],[135.384628,34.65046],[135.385629,34.650396],[135.385605,34.650025]]]}},{"type":"Feature","properties":{"name":"ベルギー"},"geometry":{"type":"Polygon","coordinates":[[[135.380954,34.650071],[135.38093,34.650001],[135.380833,34.649787],[135.380801,34.649716],[135.380377,34.649827],[135.380538,34.650118],[135.380954,34.650071]]]}},{"type":"Feature","properties":{"name":"EU"},"geometry":{"type":"Polygon","coordinates":[[[135.381069,34.649966],[135.38093,34.650001],[135.380833,34.649787],[135.380984,34.649756],[135.381069,34.649966]]]}},{"type":"Feature","properties":{"name":"バルト"},"geometry":{"type":"Polygon","coordinates":[[[135.381206,34.649937],[135.381069,34.649966],[135.380984,34.649756],[135.381128,34.649723],[135.381206,34.649937]]]}},{"type":"Feature","properties":{"name":"アルジェリア"},"geometry":{"type":"Polygon","coordinates":[[[135.38134,34.649897],[135.381206,34.649937],[135.381128,34.649723],[135.381255,34.6497],[135.38134,34.649897]]]}},{"type":"Feature","properties":{"name":"カンボジア"},"geometry":{"type":"Polygon","coordinates":[[[135.381437,34.649871],[135.38134,34.649897],[135.381255,34.6497],[135.381367,34.64967],[135.381437,34.649871]]]}},{"type":"Feature","properties":{"name":"チュニジア"},"geometry":{"type":"Polygon","coordinates":[[[135.381542,34.649842],[135.381437,34.649871],[135.381367,34.64967],[135.381477,34.649648],[135.381542,34.649842]]]}},{"type":"Feature","properties":{"name":"チリ"},"geometry":{"type":"Polygon","coordinates":[[[135.381542,34.649842],[135.381477,34.649648],[135.381576,34.649626],[135.381646,34.64982],[135.381542,34.649842]]]}},{"type":"Feature","properties":{"name":"コモンズC"},"geometry":{"type":"Polygon","coordinates":[[[135.382394,34.649939],[135.381751,34.649988],[135.381716,34.649677],[135.382378,34.649639],[135.382394,34.649939]]]}},{"type":"Feature","properties":{"name":"イタリア"},"geometry":{"type":"Polygon","coordinates":[[[135.380377,34.649827],[135.380257,34.649498],[135.380734,34.649352],[135.381448,34.649343],[135.381488,34.649509],[135.380801,34.649716],[135.380377,34.649827]]]}},{"type":"Feature","properties":{"name":"シンガポール"},"geometry":{"type":"Polygon","coordinates":[[[135.380217,34.649165],[135.380222,34.648964],[135.380697,34.648975],[135.380705,34.649134],[135.380217,34.649165]]]}},{"type":"Feature","properties":{"name":"ブルガリア"},"geometry":{"type":"Polygon","coordinates":[[[135.380222,34.648964],[135.380225,34.648801],[135.380702,34.648814],[135.380697,34.648975],[135.380222,34.648964]]]}},{"type":"Feature","properties":{"name":"オランダ"},"geometry":{"type":"Polygon","coordinates":[[[135.380225,34.648801],[135.38023,34.648635],[135.380721,34.648646],[135.380702,34.648814],[135.380225,34.648801]]]}},{"type":"Feature","properties":{"name":"コモンズD"},"geometry":{"type":"Polygon","coordinates":[[[135.380817,34.649286],[135.380823,34.648688],[135.381509,34.648701],[135.381488,34.649299],[135.380817,34.649286]]]}},{"type":"Feature","properties":{"name":"オマーン"},"geometry":{"type":"Polygon","coordinates":[[[135.381552,34.64941],[135.38159,34.648704],[135.381802,34.648734],[135.381788,34.649425],[135.381552,34.64941]]]}},{"type":"Feature","properties":{"name":"ハンガリー"},"geometry":{"type":"Polygon","coordinates":[[[135.381788,34.649425],[135.382075,34.649412],[135.382022,34.64873],[135.381802,34.648734],[135.381788,34.649425]]]}},{"type":"Feature","properties":{"name":"いのちのあかし"},"geometry":{"type":"Polygon","coordinates":[[[135.383213,34.649282],[135.382869,34.64933],[135.382692,34.648862],[135.383191,34.64873],[135.383213,34.649282]]]}},{"type":"Feature","properties":{"name":"EARTHMART"},"geometry":{"type":"Polygon","coordinates":[[[135.382574,34.6486],[135.382692,34.648862],[135.383191,34.64873],[135.382944,34.648531],[135.382574,34.6486]]]}},{"type":"Feature","properties":{"name":"BetterCo-Being"},"geometry":{"type":"Polygon","coordinates":[[[135.383631,34.649533],[135.383438,34.649304],[135.383513,34.648757],[135.383947,34.648779],[135.384135,34.649202],[135.383631,34.649533]]]}},{"type":"Feature","properties":{"name":"中国"},"geometry":{"type":"Polygon","coordinates":[[[135.384543,34.649092],[135.384591,34.649255],[135.384363,34.649308],[135.384141,34.649013],[135.383894,34.648333],[135.384245,34.648265],[135.384543,34.649092]]]}},{"type":"Feature","properties":{"name":"クウェート"},"geometry":{"type":"Polygon","coordinates":[[[135.38483,34.649021],[135.384543,34.649092],[135.384245,34.648265],[135.384537,34.648196],[135.384781,34.648829],[135.38483,34.649021]]]}},{"type":"Feature","properties":{"name":"ブラジル"},"geometry":{"type":"Polygon","coordinates":[[[135.384781,34.648829],[135.384537,34.648196],[135.38473,34.648121],[135.384987,34.64877],[135.384781,34.648829]]]}},{"type":"Feature","properties":{"name":"オーストリア"},"geometry":{"type":"Polygon","coordinates":[[[135.385133,34.647868],[135.385473,34.648121],[135.385161,34.648337],[135.384963,34.648005],[135.385133,34.647868]]]}},{"type":"Feature","properties":{"name":"スイス"},"geometry":{"type":"Polygon","coordinates":[[[135.38531,34.64768],[135.385133,34.647868],[135.385473,34.648121],[135.385649,34.647955],[135.38531,34.64768]]]}},{"type":"Feature","properties":{"name":"コロンビア"},"geometry":{"type":"Polygon","coordinates":[[[135.385495,34.647529],[135.38531,34.64768],[135.385649,34.647955],[135.385809,34.6478],[135.385495,34.647529]]]}},{"type":"Feature","properties":{"name":"ポルトガル"},"geometry":{"type":"Polygon","coordinates":[[[135.386147,34.647488],[135.385883,34.647236],[135.385495,34.647529],[135.385809,34.6478],[135.386147,34.647488]]]}},{"type":"Feature","properties":{"name":"カナダ"},"geometry":{"type":"Polygon","coordinates":[[[135.386385,34.647799],[135.386147,34.647488],[135.385473,34.648121],[135.385691,34.648267],[135.386385,34.647799]]]}},{"type":"Feature","properties":{"name":"UAE"},"geometry":{"type":"Polygon","coordinates":[[[135.386385,34.647799],[135.386605,34.64826],[135.386017,34.648452],[135.385691,34.648267],[135.386385,34.647799]]]}},{"type":"Feature","properties":{"name":"カタール"},"geometry":{"type":"Polygon","coordinates":[[[135.386686,34.648529],[135.386605,34.64826],[135.385849,34.648509],[135.385953,34.648712],[135.386686,34.648529]]]}},{"type":"Feature","properties":{"name":"ミャクミャク"},"geometry":{"type":"Polygon","coordinates":[[[135.386742,34.64875],[135.386686,34.648529],[135.38653,34.648568],[135.386599,34.648784],[135.386742,34.64875]]]}},{"type":"Feature","properties":{"name":"ベトナム"},"geometry":{"type":"Polygon","coordinates":[[[135.386599,34.648784],[135.386445,34.648829],[135.386356,34.648612],[135.38653,34.648568],[135.386599,34.648784]]]}},{"type":"Feature","properties":{"name":"ロボット"},"geometry":{"type":"Polygon","coordinates":[[[135.386445,34.648829],[135.386297,34.648861],[135.386199,34.648651],[135.386356,34.648612],[135.386445,34.648829]]]}},{"type":"Feature","properties":{"name":"フランス"},"geometry":{"type":"Polygon","coordinates":[[[135.38586,34.649297],[135.384918,34.64896],[135.385143,34.648633],[135.385983,34.649101],[135.38586,34.649297]]]}},{"type":"Feature","properties":{"name":"アメリカ"},"geometry":{"type":"Polygon","coordinates":[[[135.385774,34.649531],[135.385374,34.64946],[135.384811,34.649335],[135.384918,34.64896],[135.38586,34.649297],[135.385774,34.649531]]]}},{"type":"Feature","properties":{"name":"フィリピン"},"geometry":{"type":"Polygon","coordinates":[[[135.385337,34.649672],[135.385374,34.64946],[135.385774,34.649531],[135.385715,34.649741],[135.385337,34.649672]]]}},{"type":"Feature","properties":{"name":"アイルランド"},"geometry":{"type":"Polygon","coordinates":[[[135.386173,34.650301],[135.386139,34.649986],[135.386434,34.650039],[135.386474,34.650138],[135.386407,34.650281],[135.386173,34.650301]]]}},{"type":"Feature","properties":{"name":"モザンビーク"},"geometry":{"type":"Polygon","coordinates":[[[135.385174,34.649719],[135.385059,34.649698],[135.385121,34.649473],[135.385235,34.649494],[135.385174,34.649719]]]}},{"type":"Feature","properties":{"name":"空飛ぶクルマ"},"geometry":{"type":"Polygon","coordinates":[[[135.385059,34.649698],[135.384934,34.649677],[135.384992,34.649448],[135.385121,34.649473],[135.385059,34.649698]]]}},{"type":"Feature","properties":{"name":"ペルー"},"geometry":{"type":"Polygon","coordinates":[[[135.384934,34.649677],[135.384816,34.649654],[135.384873,34.649428],[135.384992,34.649448],[135.384934,34.649677]]]}},{"type":"Feature","properties":{"name":"ヨルダン"},"geometry":{"type":"Polygon","coordinates":[[[135.384816,34.649654],[135.384704,34.649633],[135.38476,34.649413],[135.384873,34.649428],[135.384816,34.649654]]]}},{"type":"Feature","properties":{"name":"三菱"},"geometry":{"type":"Polygon","coordinates":[[[135.389261,34.648801],[135.389661,34.648801],[135.38987,34.649032],[135.389438,34.649348],[135.388845,34.649288],[135.389261,34.648801]]]}},{"type":"Feature","properties":{"name":"パナソニック"},"geometry":{"type":"Polygon","coordinates":[[[135.388845,34.649288],[135.38855,34.649257],[135.388749,34.648549],[135.389253,34.648558],[135.389261,34.648801],[135.388845,34.649288]]]}},{"type":"Feature","properties":{"name":"TECHWORLD"},"geometry":{"type":"Polygon","coordinates":[[[135.382419,34.652587],[135.382148,34.652494],[135.382386,34.652051],[135.382687,34.652128],[135.382419,34.652587]]]}},{"type":"Feature","properties":{"name":"ガス"},"geometry":{"type":"Polygon","coordinates":[[[135.382148,34.652494],[135.381799,34.652355],[135.382043,34.651949],[135.382386,34.652051],[135.382148,34.652494]]]}},{"type":"Feature","properties":{"name":"飯田"},"geometry":{"type":"Polygon","coordinates":[[[135.381799,34.652355],[135.381652,34.65232],[135.381295,34.65191],[135.381587,34.651702],[135.382043,34.651949],[135.381799,34.652355]]]}},{"type":"Feature","properties":{"name":"外食"},"geometry":{"type":"Polygon","coordinates":[[[135.381295,34.65191],[135.381157,34.65173],[135.381324,34.651506],[135.381587,34.651702],[135.381295,34.65191]]]}},{"type":"Feature","properties":{"name":"ブルーオーシャン"},"geometry":{"type":"Polygon","coordinates":[[[135.381088,34.651362],[135.380501,34.650866],[135.380241,34.650881],[135.380249,34.651369],[135.380576,34.651638],[135.381088,34.651362]]]}},{"type":"Feature","properties":{"name":"ガンダム"},"geometry":{"type":"Polygon","coordinates":[[[135.380241,34.650881],[135.379557,34.650941],[135.380149,34.651696],[135.380446,34.651531],[135.380249,34.651369],[135.380241,34.650881]]]}},{"type":"Feature","properties":{"name":"吉本"},"geometry":{"type":"Polygon","coordinates":[[[135.379648,34.650321],[135.379364,34.649688],[135.379777,34.649569],[135.380029,34.650242],[135.379648,34.650321]]]}},{"type":"Feature","properties":{"name":"パソナ"},"geometry":{"type":"Polygon","coordinates":[[[135.379648,34.650321],[135.379179,34.650427],[135.378733,34.649842],[135.379364,34.649688],[135.379648,34.650321]]]}},{"type":"Feature","properties":{"name":"未来の都市"},"geometry":{"type":"Polygon","coordinates":[[[135.376948,34.655223],[135.376027,34.654067],[135.375574,34.654321],[135.376469,34.65546],[135.376948,34.655223]]]}},{"type":"Feature","properties":{"name":"モビリティ"},"geometry":{"type":"Polygon","coordinates":[[[135.377832,34.655539],[135.37744,34.654979],[135.376469,34.65546],[135.376942,34.65598],[135.377832,34.655539]]]}},{"type":"Feature","properties":{"name":"フューチャーライフヴィレッジ"},"geometry":{"type":"Polygon","coordinates":[[[135.377089,34.655153],[135.376561,34.654493],[135.376883,34.65433],[135.37744,34.654979],[135.377089,34.655153]]]}},{"type":"Feature","properties":{"name":"トルコ"},"geometry":{"type":"Polygon","coordinates":[[[135.383701,34.651319],[135.383727,34.651554],[135.383746,34.651709],[135.383537,34.651724],[135.383526,34.651329],[135.383701,34.651319]]]}},{"type":"Feature","properties":{"name":"バーレーン"},"geometry":{"type":"Polygon","coordinates":[[[135.38444,34.647647],[135.384597,34.647953],[135.384877,34.647756],[135.384891,34.647505],[135.384688,34.647308],[135.38444,34.647647]]]}},{"type":"Feature","properties":{"name":"トルクメニスタン"},"geometry":{"type":"Polygon","coordinates":[[[135.384386,34.647574],[135.384312,34.647233],[135.384688,34.647308],[135.38444,34.647647],[135.384386,34.647574]]]}},{"type":"Feature","properties":{"name":"北欧"},"geometry":{"type":"Polygon","coordinates":[[[135.384386,34.647574],[135.384102,34.647638],[135.384002,34.647317],[135.384312,34.647233],[135.384386,34.647574]]]}},{"type":"Feature","properties":{"name":"マルタ"},"geometry":{"type":"Polygon","coordinates":[[[135.384102,34.647638],[135.3839,34.647684],[135.383784,34.647372],[135.384002,34.647317],[135.384102,34.647638]]]}},{"type":"Feature","properties":{"name":"チェコ"},"geometry":{"type":"Polygon","coordinates":[[[135.3839,34.647684],[135.38361,34.647759],[135.383486,34.647455],[135.383784,34.647372],[135.3839,34.647684]]]}},{"type":"Feature","properties":{"name":"クラゲ"},"geometry":{"type":"Polygon","coordinates":[[[135.383824,34.648161],[135.383695,34.647817],[135.383585,34.647797],[135.383229,34.648004],[135.383422,34.648249],[135.383824,34.648161]]]}},{"type":"Feature","properties":{"name":"国際機関"},"geometry":{"type":"Polygon","coordinates":[[[135.383819,34.648086],[135.383736,34.647848],[135.384021,34.647783],[135.384101,34.648],[135.383819,34.648086]]]}},{"type":"Feature","properties":{"name":"国連"},"geometry":{"type":"Polygon","coordinates":[[[135.384103,34.648],[135.384023,34.647783],[135.384133,34.647761],[135.384221,34.647971],[135.384103,34.648]]]}},{"type":"Feature","properties":{"name":"赤十字"},"geometry":{"type":"Polygon","coordinates":[[[135.384133,34.647761],[135.384253,34.647719],[135.384342,34.64794],[135.384221,34.647971],[135.384133,34.647761]]]}},{"type":"Feature","properties":{"name":"null2"},"geometry":{"type":"Polygon","coordinates":[[[135.383229,34.648004],[135.383068,34.647768],[135.383272,34.647519],[135.383419,34.647459],[135.383585,34.647797],[135.383229,34.648004]]]}},{"type":"Feature","properties":{"name":"いのちの未来"},"geometry":{"type":"Polygon","coordinates":[[[135.383937,34.648693],[135.383486,34.648668],[135.38347,34.648401],[135.383821,34.648337],[135.383937,34.648693]]]}},{"type":"Feature","properties":{"name":"いのちめぐる冒険"},"geometry":{"type":"Polygon","coordinates":[[[135.382373,34.648066],[135.382518,34.648454],[135.382883,34.648381],[135.382867,34.648077],[135.382373,34.648066]]]}},{"type":"Feature","properties":{"name":"いのち動的平衡館"},"geometry":{"type":"Polygon","coordinates":[[[135.382867,34.648077],[135.382373,34.648066],[135.382413,34.647689],[135.382856,34.647808],[135.382867,34.648077]]]}},{"type":"Feature","properties":{"name":"アンゴラ"},"geometry":{"type":"Polygon","coordinates":[[[135.381909,34.648178],[135.382311,34.648077],[135.382338,34.647724],[135.381786,34.647861],[135.381909,34.648178]]]}},{"type":"Feature","properties":{"name":"ポーランド"},"geometry":{"type":"Polygon","coordinates":[[[135.382188,34.648496],[135.382075,34.648196],[135.3817,34.648289],[135.381638,34.648503],[135.382188,34.648496]]]}},{"type":"Feature","properties":{"name":"イギリス"},"geometry":{"type":"Polygon","coordinates":[[[135.381268,34.648148],[135.381327,34.64802],[135.381786,34.647861],[135.381909,34.648178],[135.381684,34.648238],[135.381622,34.648298],[135.381268,34.648148]]]}},{"type":"Feature","properties":{"name":"ルーマニア"},"geometry":{"type":"Polygon","coordinates":[[[135.381574,34.648483],[135.381163,34.648357],[135.381268,34.648148],[135.381622,34.648298],[135.381574,34.648483]]]}}]}
const STORAGE_KEY = 'geojson-checked-by-name';

// 状態を読み書きする関数
function loadCheckedStatus() {
  return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
}

function saveCheckedStatus(status) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(status));
}

const checkedStatus = loadCheckedStatus();

L.geoJSON(geojsonData, {
  onEachFeature: function (feature, layer) {
  
  
      // ラベル（name）を表示
    if (feature.properties && feature.properties.name) {
      layer.bindTooltip(feature.properties.name, {
        permanent: true,     // ← 常に表示
        direction: 'top',    // 上に表示（autoでも可）
        className: 'my-label'
      });
   }
  
  
    const name = feature.properties.name;

    // チェック状態をロード
    feature.properties.checked = checkedStatus[name] || false;

    const getColor = (checked) => (checked ? 'black' : 'yellow');

    const applyStyle = () => {
      if (layer.setStyle) {
        // ラインやポリゴン
        layer.setStyle({ color: getColor(feature.properties.checked) ,weight: 0.5,fillOpacity: 0.5});
      } else if (layer.setRadius) {
        // ポイント（circleMarker）
        layer.setStyle({
          fillColor: getColor(feature.properties.checked),
          color: '#000'
        });
      }
    };

    applyStyle();

    const checkboxId = 'chk-' + name;

    const popupContent = `
      <div>
        <strong>${name}</strong><br/>
        <label>
          <input type="checkbox" id="${checkboxId}" ${feature.properties.checked ? 'checked' : ''} />
          入館済
        </label>
      </div>
    `;
    layer.bindPopup(popupContent);

    layer.on('popupopen', () => {
      const checkbox = document.getElementById(checkboxId);
      if (checkbox) {
        checkbox.checked = feature.properties.checked;
        checkbox.addEventListener('change', (e) => {
          feature.properties.checked = e.target.checked;
          checkedStatus[name] = e.target.checked;
          saveCheckedStatus(checkedStatus);
          applyStyle();
          layer.closePopup();
        });
      }
    });
  },
  style: function (feature) {
    return { color: 'yellow', weight: 2 };
  },
  pointToLayer: function (feature, latlng) {
    return L.circleMarker(latlng, {
      radius: 6,
      fillColor: "yellow",
      color: "#000",
      weight: 1,
      opacity: 1,
      fillOpacity: 0.8
    });
  }
}).addTo(map);

zoomsize()
map.on('zoomend',zoomsize);


 function zoomsize() {
  const zoom = map.getZoom();
  const fontSize = zoomToFontSize(zoom);
// ズームレベルに応じたフォントサイズ関数（調整可）
function zoomToFontSize(zoom) {
  if (zoom >= 19) return '13px';
  if (zoom >= 17) return '11px';
  if (zoom >= 15) return '6px';
  return '4px';
}
  document.querySelectorAll('.my-label').forEach(el => {
    el.style.fontSize = fontSize;
  });
}

  
</script>

</body>
</html>
